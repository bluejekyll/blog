---
layout: post
title:  "Governance of the Trust-DNS project"
date:   2019-10-27 00:00:00 -0700
categories: rust
---

*Some thoughts on the future of Trust-DNS*

Trust-DNS has gone through a massive upgrade recently to prepare for the coming release of async/await to Rust stable, see the [0.18.0-alpha.1](https://crates.io/crates/trust-dns-resolver/0.18.0-alpha.1). Async/await is probably the most exciting change to come to Rust since it's 1.0 debut, in my humble opinion. This post isn't about that upgrade process, as that's still in flux, I do hope to write about that though, no this post is about governance and the future of the project.

# Governance of Trust-DNS

Four years ago I started working on a DNS library, which I subsequently called Trust-DNS, as an opportunity to learn Rust. I didn't have any particularly lofty goals for the project, other than to be easier to manage and maintain than I considered BIND to be. I wouldn't say that we've achieved that goal yet, but we will. I had no idea how daunting of a project this would be, but luckily, I haven't done it alone. Over the course of that time the project has acquired 62 contributors, with new people joining those ranks it seems monthly at this point. This is a very humbling experience, as every new contribution is such a blessing and continues to help make this software better and better. But, you as a community shouldn't be happy with this state of affairs, because at some point the project needs to grow beyond just my oversight.

## Why we should be concerned

I really like the Rust governance model, but I fear adopting it in the project. This fear is all about me not wanting to see my baby get hurt, or go in directions I don't agree with. As an example, I'm sure there are lots of people who want to see [EDNS Client Subnet](https://en.wikipedia.org/wiki/EDNS_Client_Subnet) be implemented in the resolver and client, with some support for directing traffic based on this in the server. My personal belief is that EDNS Client Subnet is an unnecessary exposure of privacy related data to the DNS resolver network, but that's just my opinion. As can be read in [#350](https://github.com/bluejekyll/trust-dns/issues/350), since I don't need this feature, I've suggested others to implement it, I'd probably want it behind a feature flag, but that's no reason not to allow for it to be used. But maybe the rest of the community feels differently, and here-in lies the issue, there is a balance between trust and control here. I maintain control of the project in theory to deliver on it's promise of trust, but I bet not everyone agrees with my opinions or decisions. What should we do to maintain a high degree of trust in the project, but also loosen the control to allow for more people to collaborate? These are issues of control and trust.

In addition to those issues, there's also the concern that the rest of the community should have in terms of hit-by-bus syndrome. There's always that chance that something will happen to me, in the Trust-DNS project's current state there isn't anyone who is either authorized or has enough of a vested interest to continue to maintain the software. To make this project grow beyond it's current level, I do realize it's important to bring new people into the project, and release some control such that I'm not the reason it's held back, though it will be hard because I've invested a lot of effort into this little project. I suck as a mentor, though, because I really only have time to work on this after the kids are in bed.

## Warning signs from the rest of the ecosystem

Trust-DNS began it's life being built directly on top of the stdlib, with blocking IO. Any good DNS implementation can't be based on blocking IO though, to scale and offer resilience, it needs to use async IO. Very early on I rewrote the library directly on top of MIO. After a bunch of different attempts I settled on state machines for managing all the network IO, and then a great thing happened. [Futures](https://crates.io/crates/futures-preview) 0.1 and [Tokio](https://crates.io/crates/tokio) were announced. These libraries were quite simply mind blowing in their thoughtfulness and detailed implementation regarding how to build async primitives in Rust, pre-async/await, much of Trust-DNS' capabilities are in no small part due to the care put into Futures and Tokio. I've tried to submit patches where I've run into issues, but my time is still limited and so I choose to spend it directly on my higher-level projects, but I am forever thankful for the effort that's gone into the continued maintenance of the Futures and Tokio ecosystem. It's mind-boggling how well maintained these libraries are, and the recent upgrades to async/await have been no different Pretty much everything I've needed was already done for me, thank you to all of you involved.

Some of the reasons I'm currently thinking of the governance of the Trust-DNS project is that there are some issues becoming more apparent in the Rust async ecosystem as a whole. We saw a lot of debate with async/await and how it would be implemented. The outcome of that was really good for the project, but super stressful for everyone involved (which I was not), we now have an excellent async programming model in Rust. In my experience has worked with near perfection, and even where it hasn't people before me have already implemented solutions with things like [async-trait](https://crates.io/crates/async-trait). We survived the async/await discussions, and now we're seeing the excitement around async/await spill over into some of the supporting frameworks. Tokio has been such a mainstay for the past three years and now [async-std](https://crates.io/crates/async-std) is starting to get some fanfare. I'd like to understand what about the governance of Tokio didn't allow for the ideas in [async-std](https://crates.io/crates/async-std) to be incorporated. There are some really great ergonomic achievements in async-std that should be considered in other places, these all made possible by the async/await support coming in Rust.

I worry about this fracture, as a library maintainer, because this will inevitably mean more work for supporting Trust-DNS over both runtimes. In the end this could be a good thing, though. There are a few companies that have chosen to adopt Trust-DNS to support their products, in different ways. In some of these cases, they have their own internal runtimes and having something like std-lib will be able to provide us with the ability to test that the library is portable across runtimes. From this perspective it would be a good thing. That being said, I can't help but feel like there is going to be a more generally fractured ecosystem around both frameworks. This is a warning to Trust-DNS that we should get ahead of governance issues. Rust's async ecosystem has had a lot of great work go into it, and I hope that everyone involved can find a path past hurt and pain towards apologies and forgiveness because what's made Rust great is a strong community working towards a common goal, our async ecosystem should be no different.

## Uncertain future

While I don't have the ability to fix the the general async ecosystem myself, I do want to make sure that at least my little corner of the world can be made better after the experiences in the rest of the ecosystem. So while I don't have a proposal right now, I do know some things I want to figure out:

- A governance model for Trust-DNS that doesn't shatter the trust that the project has built over the years.
- Create safe spaces for constructive discussion that incorporates the concerns of all members.
- Alleviate my fear that the project doesn't have someone to carry it forward if I go.
- Make sure that new members are always welcome to contribute.
